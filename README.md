# CIS655-final-project: Image-Describing Website

This website, hosted on GCP, utilizes an App Engine backend and a Virtual Machine front 
end.  It also utilizes Googles Vision API, and Vertex AI.  It allows a user to upload an
image from their computer and select the ways they want the image analyzed.  The project 
then displays the user-selected results, generated by image recognition and AI.  The 
project also utilized Cloud Build as a CI/CD platform.

## Services
### Cloud Build
I used Cloud Build in this project so I could use Visual Studio Code as my text editor instead of vim, and so I could keep a repository of my work.  I created the repository, and enabled Cloud Build on my project.  Then, I had to link the repo to my project, and add a trigger, so that any time I pushed to the project, the trigger would notice and initialize a build of the project.  To correctly build the project, cloudbuild required a document in my project called "cloudbuild.yaml", which specified the build steps required for the project.  Since I wanted both my frontend and backend in the same repository, it required two steps. 

The first step was for the frontend, hosted on a Virtual Machine.  The steps are described below.  I had to cd into the correct directory, and pull the most recent changes.  Then, because the virtual machine looked for index.html, the script, and the stylesheet in /var/www/html, I had to compy those document into that directory.  Then the machine could be restarted.  
'''
- name: "gcr.io/cloud-builders/gcloud"
  timeout: "300s"
  args:
    - "compute"
    - "ssh"
    - "final-project-frontend"
    - "--zone=us-east1-d"
    - "--command"
    - |
      cd /var/www/html/CIS655-final-project &&
      git config --global --add safe.directory /var/www/html/CIS655-final-project &&
      git pull origin main &&
      sudo cp /var/www/html/CIS655-final-project/frontend/index.html /var/www/html &&
      sudo cp /var/www/html/CIS655-final-project/frontend/script.js /var/www/html &&
      sudo cp /var/www/html/CIS655-final-project/frontend/frontendStyling.css /var/www/html &&
      sudo systemctl restart apache2
'''

For the backend, it was as easy as deploying the app.yaml file.  It was imperative however, that the service account used had the correct permissions, or it would not build
'''
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  entrypoint: 'bash'
  args: ['-c', 'gcloud app deploy --account=automated-build-account@cis655-vision-api-project.iam.gserviceaccount.com ./backend/app.yaml']
  timeout: '1600s'
'''

### Virtual Machine Instance
### App Engine Instance
### Vision API
### Vertex AI


